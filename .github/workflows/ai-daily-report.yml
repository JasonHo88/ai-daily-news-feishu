name: AIèµ„è®¯æ—¥æŠ¥è‡ªåŠ¨æ”¶é›†

on:
  schedule:
    # æ¯å¤©åŒ—äº¬æ—¶é—´ 08:00 (UTC 00:00)
    - cron: '0 0 * * *'
  workflow_dispatch: # ä¿ç•™æ‰‹åŠ¨è§¦å‘æŒ‰é’®

permissions:
  contents: read

jobs:
  collect-and-push:
    runs-on: ubuntu-latest
    timeout-minutes: 15 # èµ„è®¯ä»»åŠ¡é€šå¸¸ 5 åˆ†é’Ÿå†…å®Œæˆ
    
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
        
      - name: è®¾ç½® Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          cache: 'pip'
          
      - name: å®‰è£…å¿…è¦ä¾èµ–
        run: |
          python -m pip install --upgrade pip
          # å¿…é¡»å®‰è£…è„šæœ¬ç”¨åˆ°çš„æ‰€æœ‰åº“
          pip install requests feedparser deep-translator
          
      - name: æ‰§è¡Œ AI èµ„è®¯æ”¶é›†
        env:
          # ç¡®ä¿ä½ åœ¨ä»“åº“çš„ Secrets ä¸­è®¾ç½®äº† FEISHU_WEBHOOK_URL
          FEISHU_WEBHOOK_URL: ${{ secrets.FEISHU_WEBHOOK_URL }}
        run: |
          echo "ğŸš€ ä»»åŠ¡å¯åŠ¨æ—¶é—´: $(date)"
          python collect_ai_news.py
